{% extends './base_other.html' %} {% block main_other %}
<div class="section section-header cd-section" id="headers" style="padding: 0">
    <!-- loading.html로 분리 -->
    <div class="header-3">
        <!-- 간단 네비게이션 -->
        <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute">
            <div class="container">
                <a class="navbar-brand mb-0" href="/">너의 목소리가 보여</a>
            </div>
        </nav>
        <div class="page-carousel">
            <div class="filter"></div>
            <div
                id="carouselExampleIndicators"
                class="carousel slide"
                data-ride="carousel"
            >
                <ol class="carousel-indicators">
                    <!-- 왜 .active 색깔 안바뀌지?
                        1. paper-kit.css에서 .carousel-indicators .active를 #6bd098로
                        2. paper-kit.min.css에서 .carousel-indicators .active를 #6bd098로
                        3. paper-kit.css.map에서 .carousel-indicators .active를 success-color로
                        4. 본문에서 class="carousel-item active" style="background-color: #6bd098"로 바꿔도 안됨
                        오오오오오오
                        5. data-target="#carouselExampleIndicators"
                        data-slide-to="0"
                        class="active"
                        style="background-color: #6bd098"
                        여기서 바꿨더니 됨-->

                    <li
                        data-target="#carouselExampleIndicators"
                        data-slide-to="0"
                        class="active"
                        style="background-color: #fff"
                    ></li>
                    <li
                        data-target="#carouselExampleIndicators"
                        data-slide-to="1"
                        style="background-color: #fff"
                    ></li>
                    <li
                        data-target="#carouselExampleIndicators"
                        data-slide-to="2"
                        style="background-color: #fff"
                    ></li>
                </ol>
                <div class="carousel-inner" role="listbox">
                    <div
                        class="carousel-item active"
                        style="background-color: #6bd098"
                    >
                        <div
                            class="page-header"
                            style="
                                background-image: url('../../../static/img/sections/agassi_1.jpg');
                            "
                        >
                            <div class="filter"></div>
                            <div class="content-center">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-md-6 text-left">
                                            <h2 class="title">
                                                자막을 생성하고 있습니다
                                            </h2>
                                            <h5>하울의 움직이는 성 | 대사 O | 화자 O | 배경음 O</h5>
                                            <h5>남은 예상시간 00시 06분</h5>
                                            <br />
                                            <div
                                                id="sliderRegular"
                                                class="slider noUi-target noUi-ltr noUi-horizontal noUi-txt-dir-ltr"
                                            >
                                                <div class="noUi-base">
                                                    <div
                                                        class="noUi-connects"
                                                    ></div>
                                                    <div
                                                        class="noUi-origin"
                                                        style="
                                                            transform: translate(
                                                                -794.444%,
                                                                0px
                                                            );
                                                            z-index: 4;
                                                        "
                                                    >
                                                        <div
                                                            class="noUi-handle noUi-handle-lower"
                                                            data-handle="0"
                                                            tabindex="0"
                                                            role="slider"
                                                            aria-orientation="horizontal"
                                                            aria-valuemin="0.0"
                                                            aria-valuemax="100.0"
                                                            aria-valuenow="20.6"
                                                            aria-valuetext="20.56"
                                                        >
                                                            <div
                                                                class="noUi-touch-area"
                                                            ></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mt-5 text-left">
                                            <form method="post"> <!--action="{% url 'result_download' %}"-->
                                                {% csrf_token %}
                                                <button
                                                    type="submit"
                                                    class="btn btn-outline-neutral btn-round btn-lg"
                                                >
                                                    다음
                                                    <i
                                                        class="nc-icon nc-minimal-right"
                                                    ></i>
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div
                            class="page-header"
                            style="
                                background-image: url('../../../static/img/sections/ajussi_1.jpg');
                            "
                        >
                            <div class="filter"></div>
                            <div class="content-center">
                                <div class="container">
                                    <div class="row">
                                        <div
                                            class="col-md-8 ml-auto mr-auto text-center"
                                        >
                                            <h2 class="title">
                                                자막을 생성하고 있습니다
                                            </h2>
                                            <h5>하울의 움직이는 성 | 대사 O | 화자 O | 배경음 O</h5>
                                            <h5>남은 예상시간 00시 06분</h5>
                                            <br />
                                            <div
                                                id="sliderRegular"
                                                class="slider noUi-target noUi-ltr noUi-horizontal noUi-txt-dir-ltr"
                                            >
                                                <div class="noUi-base">
                                                    <div
                                                        class="noUi-connects"
                                                    ></div>
                                                    <div
                                                        class="noUi-origin"
                                                        style="
                                                            transform: translate(
                                                                -794.444%,
                                                                0px
                                                            );
                                                            z-index: 4;
                                                        "
                                                    >
                                                        <div
                                                            class="noUi-handle noUi-handle-lower"
                                                            data-handle="0"
                                                            tabindex="0"
                                                            role="slider"
                                                            aria-orientation="horizontal"
                                                            aria-valuemin="0.0"
                                                            aria-valuemax="100.0"
                                                            aria-valuenow="20.6"
                                                            aria-valuetext="20.56"
                                                        >
                                                            <div
                                                                class="noUi-touch-area"
                                                            ></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div
                                            class="col-md-8 ml-auto mr-auto mt-5 text-center"
                                        >
                                        <form method="post"> <!--action="{% url 'result_download' %}"-->
                                            {% csrf_token %}
                                            <button
                                                type="submit"
                                                class="btn btn-outline-neutral btn-round btn-lg"
                                            >
                                                다음
                                                <i
                                                    class="nc-icon nc-minimal-right"
                                                ></i>
                                            </button>
                                        </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div
                            class="page-header"
                            style="
                                background-image: url('../../../static/img/sections/gisang_1.jpg');
                            "
                        >
                            <div class="filter"></div>
                            <div class="content-center">
                                <div class="container">
                                    <div class="row">
                                        <div
                                            class="col-md-7 ml-auto text-right"
                                        >
                                            <h2 class="title">
                                                자막을 생성하고 있습니다
                                            </h2>
                                            <h5>하울의 움직이는 성 | 대사 O | 화자 O | 배경음 O</h5>
                                            <h5>남은 예상시간 00시 06분</h5>

                                            <br />
                                            <div
                                                id="sliderRegular"
                                                class="slider noUi-target noUi-ltr noUi-horizontal noUi-txt-dir-ltr"
                                            >
                                                <div class="noUi-base">
                                                    <div
                                                        class="noUi-connects"
                                                    ></div>
                                                    <div
                                                        class="noUi-origin"
                                                        style="
                                                            transform: translate(
                                                                -794.444%,
                                                                0px
                                                            );
                                                            z-index: 4;
                                                        "
                                                    >
                                                        <div
                                                            class="noUi-handle noUi-handle-lower"
                                                            data-handle="0"
                                                            tabindex="0"
                                                            role="slider"
                                                            aria-orientation="horizontal"
                                                            aria-valuemin="0.0"
                                                            aria-valuemax="100.0"
                                                            aria-valuenow="20.6"
                                                            aria-valuetext="20.56"
                                                        >
                                                            <div
                                                                class="noUi-touch-area"
                                                            ></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div
                                            class="col-md-7 ml-auto mt-5 text-right"
                                        >   
                                        <form method="post"> <!--action="{% url 'result_download' %}"-->
                                            {% csrf_token %}
                                            <!-- task_id를 다음 창에서도 열기 위해 숨겨진 필드로 추가하기-->
                                            <!--<input type="hidden" name="task_id" value="{{ request.GET.task_id }}">-->
                                            <button
                                                type="submit"
                                                class="btn btn-outline-neutral btn-round btn-lg"
                                            >
                                                다음
                                                <i
                                                    class="nc-icon nc-minimal-right"
                                                ></i>
                                            </button>
                                        </form>
                                            <div class="row">
                                                <h6>
                                                    이곳에 예상시간 업데이트 될
                                                    예정임
                                                </h6>
                                                <div
                                                    id="progress_percent"
                                                ></div>
                                                <div id="estimated-time">
                                                    남은 예상시간을 계산중입니다
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <a
                    class="left carousel-control carousel-control-prev"
                    href="#carouselExampleIndicators"
                    role="button"
                    data-slide="prev"
                    style="background-color: rgba(255, 255, 255, 0)"
                >
                    <span class="fa fa-angle-left"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a
                    class="right carousel-control carousel-control-next"
                    href="#carouselExampleIndicators"
                    role="button"
                    data-slide="next"
                    style="background-color: rgba(225, 225, 225, 0)"
                >
                    <span class="fa fa-angle-right"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Ajax 사용해 모델진행상태 요청 및 응답받아 화면에 표시하는 javascript 코드 -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    $(document).ready(function () {
        // 모델 실행 중인 동안 정기적으로 서버에 요청을 보냄
        console.log('B');
        /*
        var intervalId = setInterval(function () {
            $.ajax({
                url: '/check_progress/', // Django View의 URL - 진행상황이 적힌 txt 파일 내용을 확인함
                type: 'POST',
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    // 서버로부터 받은 데이터를 사용하여 화면 업데이트
                    var progressPercent = data.progress_percent;
                    var estimatedTime = data.estimated_time;

                    // 진행률 업데이트
                    $('#progress_percent').text(
                        'Progress Percentage: ' + progressPercent + '%'
                    );
                    // 예상 시간 업데이트
                    $('#estimated-time').text(
                        'Estimated Time: ' + estimatedTime
                    );
                },
            });
        }, 5000); // 5초마다 업데이트 (원하는 간격으로 조절)
        */
    });
</script>

{% endblock %}
